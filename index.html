<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>2019 05 20</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="2019 05 20">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="2019 05 20">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2019 05 20">
  
    <link rel="alternate" href="/atom.xml" title="2019 05 20" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">2019 05 20</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">This is a battle!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Algorithms-Design-and-Analysis-Part-2-Programming-Questions-week1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/20/Algorithms-Design-and-Analysis-Part-2-Programming-Questions-week1/" class="article-date">
  <time datetime="2016-08-20T17:16:29.000Z" itemprop="datePublished">2016-08-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/20/Algorithms-Design-and-Analysis-Part-2-Programming-Questions-week1/">Algo Part 2 -- Programming Questions (week1)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/20/Algorithms-Design-and-Analysis-Part-2-Programming-Questions-week1/" data-id="cjlpbskck0006xch50h5hjqaf" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algo/">Algo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week6/" class="article-date">
  <time datetime="2016-08-20T17:07:09.000Z" itemprop="datePublished">2016-08-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week6/">Algo Part 1 -- Programming Questions (week6)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="题目1："><a href="#题目1：" class="headerlink" title="题目1："></a>题目1：</h3><p>The goal of this problem is to implement a variant of the 2-SUM algorithm (covered in the Week 6 lecture on hash table applications).</p>
<p>The file contains 1 million integers, both positive and negative (there might be some repetitions!).This is your array of integers, with the ith row of the file specifying the ith entry of the array.</p>
<p>Your task is to compute the number of target values t in the interval [-10000,10000] (inclusive) such that there are distinct numbers x,y in the input file that satisfy x+y=t. (NOTE: ensuring distinctness requires a one-line addition to the algorithm from lecture.)</p>
<p>Write your numeric answer (an integer between 0 and 20001) in the space provided.</p>
<p>OPTIONAL CHALLENGE: If this problem is too easy for you, try implementing your own hash table for it. For example, you could compare performance under the chaining and open addressing approaches to resolving collisions.</p>
<h3 id="题目2："><a href="#题目2：" class="headerlink" title="题目2："></a>题目2：</h3><p>The goal of this problem is to implement the “Median Maintenance” algorithm (covered in the Week 5 lecture on heap applications). The text file contains a list of the integers from 1 to 10000 in unsorted order; you should treat this as a stream of numbers, arriving one by one. Letting xi denote the ith number of the file, the kth median mk is defined as the median of the numbers x1,…,xk. (So, if k is odd, then mk is ((k+1)/2)th smallest number among x1,…,xk; if k is even, then mk is the (k/2)th smallest number among x1,…,xk.)</p>
<p>In the box below you should type the sum of these 10000 medians, modulo 10000 (i.e., only the last 4 digits). That is, you should compute (m1+m2+m3+⋯+m10000)mod10000.</p>
<p>OPTIONAL EXERCISE: Compare the performance achieved by heap-based and search-tree-based implementations of the algorithm.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week6/" data-id="cjlpbskcn0008xch59564bmcp" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algo/">algo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week5/" class="article-date">
  <time datetime="2016-08-20T17:06:56.000Z" itemprop="datePublished">2016-08-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week5/">Algo Part 1 -- Programming Questions (week5)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h3><p>The file contains an adjacency list representation of an undirected weighted graph with 200 vertices labeled 1 to 200. Each row consists of the node tuples that are adjacent to that particular vertex along with the length of that edge. For example, the 6th row has 6 as the first entry indicating that this row corresponds to the vertex labeled 6. The next entry of this row “141,8200” indicates that there is an edge between vertex 6 and vertex 141 that has length 8200. The rest of the pairs of this row indicate the other vertices adjacent to vertex 6 and the lengths of the corresponding edges.</p>
<p>Your task is to run Dijkstra’s shortest-path algorithm on this graph, using 1 (the first vertex) as the source vertex, and to compute the shortest-path distances between 1 and every other vertex of the graph. If there is no path between a vertex v and vertex 1, we’ll define the shortest-path distance between 1 and v to be 1000000.</p>
<p>You should report the shortest-path distances to the following ten vertices, in order: 7,37,59,82,99,115,133,165,188,197. You should encode the distances as a comma-separated string of integers. So if you find that all ten of these vertices except 115 are at distance 1000 away from vertex 1 and 115 is 2000 distance away, then your answer should be 1000,1000,1000,1000,1000,2000,1000,1000,1000,1000. Remember the order of reporting DOES MATTER, and the string should be in the same order in which the above ten vertices are given. The string should not contain any spaces. Please type your answer in the space provided.</p>
<p>IMPLEMENTATION NOTES: This graph is small enough that the straightforward O(mn) time implementation of Dijkstra’s algorithm should work fine. OPTIONAL: For those of you seeking an additional challenge, try implementing the heap-based version. Note this requires a heap that supports deletions, and you’ll probably need to maintain some kind of mapping between vertices and their positions in the heap.</p>
<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week5/" data-id="cjlpbskce0004xch5m9agi0lx" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algo-alogrithm-Dijkstra-heap-heapq-priority-queue-python-shortest-path/">algo, alogrithm, Dijkstra, heap, heapq, priority queue, python, shortest path</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week4/" class="article-date">
  <time datetime="2016-08-17T15:24:10.000Z" itemprop="datePublished">2016-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week4/">Algo Part 1 -- Programming Questions (week4)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这里主要记录下来在 “Algo: Part 1” 的Programming Questions 中的算法、实现和作业中的困难。我是用的是 Python</p>
<h3 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h3><p>The file contains the edges of a directed graph. Vertices are labeled as positive integers from 1 to 875714. Every row indicates an edge, the vertex label in first column is the tail and the vertex label in second column is the head (recall the graph is directed, and the edges are directed from the first column vertex to the second column vertex). So for example, the 11th row looks liks : “2 47646”. This just means that the vertex with label 2 has an outgoing edge to the vertex with label 47646</p>
<p>Your task is to code up the algorithm from the video lectures for computing strongly connected components (SCCs), and to run this algorithm on the given graph.</p>
<p>Output Format: You should output the sizes of the 5 largest SCCs in the given graph, in decreasing order of sizes, separated by commas (avoid any spaces). So if your algorithm computes the sizes of the five largest SCCs to be 500, 400, 300, 200 and 100, then your answer should be “500,400,300,200,100” (without the quotes). If your algorithm finds less than 5 SCCs, then write 0 for the remaining terms. Thus, if your algorithm computes only 3 SCCs whose sizes are 400, 300, and 100, then your answer should be “400,300,100,0,0” (without the quotes). (Note also that your answer should not have any spaces in it.)</p>
<p>WARNING: This is the most challenging programming assignment of the course. Because of the size of the graph you may have to manage memory carefully. The best way to do this depends on your programming language and environment, and we strongly suggest that you exchange tips for doing this on the discussion forums.</p>
<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>第四周，作业要求找出 “Strongly Connected Components” (SCC) 并计算其内部所含点的数量。如果一幅图上的任意一点都可以经由边与其他所有点相连，这个图就被称为 SCC，可以直观的理解为内部的点形成了回路的图。对于定向图，寻找 SCC 的方法基本可以分为以下几个步骤：</p>
<ul>
<li>生成定向图的反向图</li>
<li>对生成的反向图中的点进行深度优先搜索，纪录搜索结束的时间，最先搜索完成的点（也就是最底层的点）排到     最后，其次搜索完成的点（次底层点）排至倒数第二，依次类推；</li>
<li>对原定向图进行深度优先搜索，点的搜索顺序按照刚刚得到的完成顺序进行，纪录每一个点的上层点 (leader)；</li>
<li>根据每个点的上层点 (leader)，倒推得到 SCC。</li>
</ul>
<p>作业的难点在于深度优先算法在 python 中的实现。由于作业给的图非常大，如果在 python 中使用迭代的方式循环调用同一个函数来实现深度优先搜索，很有可能会导致达到迭代次数上限，所以只能用普通的循环语句来实现。<br>理论上，任何一个递归函数均可以转化成普通循环语句。<br>关于BFS与DFS从递归转普通循环，请参见<a href="http://stackoverflow.com/questions/5278580/non-recursive-depth-first-search-algorithm" target="_blank" rel="external">下面</a>的伪代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">DFS:</div><div class="line"></div><div class="line">list nodes_to_visit = &#123;root&#125;;</div><div class="line">while( nodes_to_visit isn&apos;t empty ) &#123;</div><div class="line">  currentnode = nodes_to_visit.first();</div><div class="line">  nodes_to_visit.prepend( currentnode.children );</div><div class="line">  //do something</div><div class="line">&#125;</div><div class="line"></div><div class="line">BFS:</div><div class="line"></div><div class="line">list nodes_to_visit = &#123;root&#125;;</div><div class="line">while( nodes_to_visit isn&apos;t empty ) &#123;</div><div class="line">  currentnode = nodes_to_visit.first();</div><div class="line">  nodes_to_visit.append( currentnode.children );</div><div class="line">  //do something</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码：<br>Python 代码如下。由于给的图非常大，所以我将整个进度打印在屏幕上，方便监视。本文参考了<a href="http://pikipity.github.io/blog/cousera-algorithm-week4.html" target="_blank" rel="external">这里</a>的代码并对其进行了改进，没有使用dict而是使用了nested list代表图形， 速度经测试提高了大约10倍。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">readin_graph</span><span class="params">(path)</span>:</span></div><div class="line">    <span class="string">""" Read the original file.</span></div><div class="line">    Args:</div><div class="line">    - path(string): The file path.</div><div class="line">    </div><div class="line">    returns:</div><div class="line">    - graph (nested list): with element index as the tail node, the list element</div><div class="line">        the head nodes that connected to the tail</div><div class="line">    </div><div class="line">    - node_list (list): A none repe </div><div class="line">    """</div><div class="line">    graph = [[]]</div><div class="line">    node_list = []</div><div class="line">    seen = set()</div><div class="line">    idx=<span class="number">0</span></div><div class="line">    <span class="keyword">with</span> open(path) <span class="keyword">as</span> f:</div><div class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">            temp = line.split(<span class="string">' '</span>)[:<span class="number">-1</span>]</div><div class="line">            tail, head = int(temp[<span class="number">0</span>]) - <span class="number">1</span>, int(temp[<span class="number">1</span>]) <span class="number">-1</span> </div><div class="line">            <span class="keyword">if</span> tail==idx:</div><div class="line">                graph[tail].append(head)</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">while</span>(tail!=idx):</div><div class="line">                    graph.append([])</div><div class="line">                    idx+=<span class="number">1</span></div><div class="line">                graph[tail].append(head)</div><div class="line">    <span class="keyword">return</span> graph</div><div class="line"><span class="comment">#############    reverse graph         ################################</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse</span><span class="params">(graph)</span>:</span></div><div class="line">    <span class="string">"""Return a reversed graph.</span></div><div class="line">    Args:</div><div class="line">    - graph(list): list that represent the graph </div><div class="line">    </div><div class="line">    """</div><div class="line">    rev_graph = []</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(graph)):</div><div class="line">        rev_graph.append([])</div><div class="line">    <span class="keyword">for</span> idx, i <span class="keyword">in</span> enumerate(graph):</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> i:</div><div class="line">            rev_graph[j].append(idx)</div><div class="line">    <span class="keyword">return</span> rev_graph</div><div class="line"></div><div class="line"><span class="comment">############           DFS_search            ################################</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFS_search</span><span class="params">(graph, nodes_to_visit, reverse, verbose)</span>:</span></div><div class="line">    <span class="string">"""DFS_search implementation.</span></div><div class="line">    The recusive DFS aglo was transfered here into a while loop to avoid </div><div class="line">    stack overflow. </div><div class="line">    To make the non recursive DFS algorithm, see reference:</div><div class="line">    http://stackoverflow.com/questions/5278580/non-recursive-depth-first-search-algorithm </div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - graph (list): The graph for DFS</div><div class="line">    - nodes_to_visit (list): The DFS will be executed based on the given ordered </div><div class="line">        nodes list.</div><div class="line">    - reverse (bool): The graph is reversed or not. Depends on the value, </div><div class="line">        different object will be returned. If the graph is reversed </div><div class="line">        (1st DFS search), thenthe magic nodes list for the 2nd DFS search will </div><div class="line">        be returned. If the graph is not reversed (2nd DFS search on the </div><div class="line">        original graph), then the SCC dict with leader nodes will be returned. </div><div class="line">    - verbose (bool): Type some debug message if True.</div><div class="line">    </div><div class="line">    """</div><div class="line">    visited = set() <span class="comment">#Store the visited node here</span></div><div class="line">    <span class="keyword">if</span> reverse:</div><div class="line">        dfs_finish_order = [] <span class="comment">#Store the finished DFS node here in order. </span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        leader_with_scc = &#123;&#125; <span class="comment">#Store the scc with its leader node as key, scc as </span></div><div class="line">                             <span class="comment">#value (list)</span></div><div class="line">    N=<span class="number">1.0</span></div><div class="line">    N_total = len(nodes_to_visit)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> nodes_to_visit:</div><div class="line">        N+=<span class="number">1</span></div><div class="line">        <span class="keyword">print</span> <span class="string">"Finished %"</span>, N/N_total*<span class="number">100</span> <span class="comment">#Show progress</span></div><div class="line">        <span class="keyword">if</span> verbose:</div><div class="line">            <span class="keyword">print</span> <span class="string">"start explore "</span>, i</div><div class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> visited:</div><div class="line">            <span class="keyword">if</span> verbose:</div><div class="line">                <span class="keyword">print</span> <span class="string">"Already explored "</span>, i</div><div class="line">            <span class="keyword">continue</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> reverse:</div><div class="line">                leader_with_scc[i] = []</div><div class="line">            visited.add(i)</div><div class="line">            track = [i]     </div><div class="line">            <span class="keyword">while</span> len(track) != <span class="number">0</span>:</div><div class="line">                current_node = track[<span class="number">-1</span>]</div><div class="line">                <span class="keyword">if</span> verbose:</div><div class="line">                    <span class="keyword">print</span> <span class="string">'currently_on_node'</span>, current_node</div><div class="line">                visited.add(current_node)</div><div class="line">                </div><div class="line">                toextend = list(set(graph[current_node]) - visited)</div><div class="line">                <span class="keyword">if</span> len(toextend) == <span class="number">0</span>:</div><div class="line">                    finished_node = track.pop()</div><div class="line">                    <span class="keyword">if</span> reverse:</div><div class="line">                        dfs_finish_order.append(finished_node)</div><div class="line">                        <span class="keyword">if</span> verbose:</div><div class="line">                            <span class="keyword">print</span> <span class="string">"List of node finished search:"</span>, dfs_finish_order</div><div class="line">                    <span class="keyword">else</span>:</div><div class="line">                        leader_with_scc[i].append(finished_node)</div><div class="line">                <span class="keyword">else</span>: </div><div class="line">                    track.extend(toextend)</div><div class="line">    <span class="keyword">if</span> reverse:</div><div class="line">        <span class="keyword">if</span> verbose:</div><div class="line">            <span class="keyword">print</span> <span class="string">"dfs_finish_time_list:"</span>, dfs_finish_order </div><div class="line">        <span class="keyword">return</span> dfs_finish_order</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">if</span> verbose:</div><div class="line">            <span class="keyword">print</span> <span class="string">"leader_with_scc:"</span>, leader_with_scc </div><div class="line">        <span class="keyword">return</span> leader_with_scc</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">reversed_magic_lise</span><span class="params">(magic_list)</span>:</span></div><div class="line">    <span class="string">"""return a reversed magic_list</span></div><div class="line">    firstly remove the duplicated element in order, then reverse the list.</div><div class="line">    eg: magic_list: [0,1,3,5,1,5,2]</div><div class="line">        cleaned magic_list: [0,1,3,5,2]</div><div class="line">        reversed magic_list: [2,5,3,1,0]</div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - magic_list (list): a magic list</div><div class="line">    """</div><div class="line">    seen = set()</div><div class="line">    temp = []</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> magic_list:</div><div class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> seen:</div><div class="line">            <span class="keyword">continue</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            temp.append(i)</div><div class="line">            seen.add(i)</div><div class="line">    <span class="keyword">return</span> list( reversed(temp) )</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">scc_size</span><span class="params">(scc_dict)</span>:</span></div><div class="line">    <span class="string">"""Print the first 5 largest scc size </span></div><div class="line">    Args:</div><div class="line">    - scc_dict (dict): key: leader node, value: scc nodes under the leader node.</div><div class="line">    """</div><div class="line">    </div><div class="line">    len_dict = &#123;&#125;</div><div class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> scc_dict.keys():</div><div class="line">        len_dict[k] = len( set(scc_dict[k]) )</div><div class="line">    scc_len_list = list(sorted(len_dict.values(), reverse=<span class="keyword">True</span>))</div><div class="line">    <span class="keyword">print</span> <span class="string">"The first 5 largest SCC length : "</span>, scc_len_list[:<span class="number">5</span>]</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    start_time = time.time()</div><div class="line">    file = <span class="string">"_410e934e6553ac56409b2cb7096a44aa_SCC.txt"</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"..........................................read in graph... "</span></div><div class="line">    origin_graph = readin_graph(file)</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">"...........................................Reverse graph... "</span></div><div class="line">    reversed_graph = reverse(origin_graph)</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">"..................1st DFS search and generate magic list... "</span></div><div class="line">    magic_list = DFS_search(graph=reversed_graph, </div><div class="line">                            nodes_to_visit=range(<span class="number">875714</span>), </div><div class="line">                            reverse = <span class="keyword">True</span>, verbose=<span class="keyword">False</span>)</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">".......................................reverse magic_list... "</span></div><div class="line">    reversed_magic_list = reversed_magic_lise(magic_list) </div><div class="line">    </div><div class="line">    <span class="keyword">print</span> <span class="string">".............................2nd DFS search and generage SCC.."</span></div><div class="line">    scc = DFS_search(graph=origin_graph, </div><div class="line">                            nodes_to_visit=reversed_magic_list, </div><div class="line">                            reverse = <span class="keyword">False</span>, verbose=<span class="keyword">False</span>)</div><div class="line">    scc_size(scc)</div><div class="line">    <span class="keyword">print</span> <span class="string">"..................Time used in sec: "</span>, time.time() - start_time</div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="keyword">if</span> <span class="keyword">False</span>:</div><div class="line">        <span class="keyword">print</span> <span class="string">'graph:'</span>,origin_graph</div><div class="line">        <span class="keyword">print</span> <span class="string">"regraph:"</span>, reversed_graph</div><div class="line">        <span class="keyword">print</span> <span class="string">"magic_list"</span>, magic_list     </div><div class="line">        <span class="keyword">print</span> <span class="string">"reversed_magic_list: "</span>, magic_list</div><div class="line">        <span class="keyword">print</span> <span class="string">"SCC:"</span>, scc</div></pre></td></tr></table></figure>
<p>为了对比，这里也给出了递归形式的代码，递归形式的代码在小的图形中可以跑，在本题的图形中会出现stack overflow 的error. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time</div><div class="line"><span class="keyword">import</span> sys</div><div class="line">sys.setrecursionlimit(<span class="number">20000</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">readin_graph</span><span class="params">(path)</span>:</span></div><div class="line">    <span class="string">""" Read the original file.</span></div><div class="line">    Args:</div><div class="line">    - path(string): The file path.</div><div class="line">    </div><div class="line">    returns:</div><div class="line">    - graph (nested list): with element index as the tail node, the list element</div><div class="line">        the head nodes that connected to the tail</div><div class="line">    </div><div class="line">    - node_list (list): A none repe </div><div class="line">    """</div><div class="line">    graph = [[]]</div><div class="line">    node_list = []</div><div class="line">    seen = set()</div><div class="line">    idx=<span class="number">0</span></div><div class="line">    <span class="keyword">with</span> open(path) <span class="keyword">as</span> f:</div><div class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">            temp = line.split(<span class="string">' '</span>)[:<span class="number">-1</span>]</div><div class="line">            tail, head = int(temp[<span class="number">0</span>]) - <span class="number">1</span>, int(temp[<span class="number">1</span>]) - <span class="number">1</span> </div><div class="line">            <span class="keyword">if</span> tail==idx:</div><div class="line">                graph[tail].append(head)</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="keyword">while</span>(tail!=idx):</div><div class="line">                    graph.append([])</div><div class="line">                    idx+=<span class="number">1</span></div><div class="line">                graph[tail].append(head)</div><div class="line">    <span class="keyword">return</span> graph</div><div class="line"></div><div class="line"><span class="comment">#############    reverse graph         ################################</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse</span><span class="params">(graph)</span>:</span></div><div class="line">    <span class="string">"""Return a reversed graph.</span></div><div class="line">    Args:</div><div class="line">    - graph(list): list that represent the graph </div><div class="line">    </div><div class="line">    """</div><div class="line">    rev_graph = []</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(graph)):</div><div class="line">        rev_graph.append([])</div><div class="line">    <span class="keyword">for</span> idx, i <span class="keyword">in</span> enumerate(graph):</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> i:</div><div class="line">            rev_graph[j].append(idx)</div><div class="line">    <span class="keyword">return</span> rev_graph</div><div class="line"></div><div class="line"><span class="comment">############           DFS            ################################</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">DFS</span><span class="params">(graph, nodes_to_visit, reverse, verbose)</span>:</span></div><div class="line">    <span class="string">'''Recusive DFS_search implementation.</span></div><div class="line">    Args:</div><div class="line">    - graph (list): The graph for DFS</div><div class="line">    - nodes_to_visit (list): The DFS will be executed based on the given ordered </div><div class="line">        nodes list.</div><div class="line">    - reverse (bool): The graph is reversed or not. Depends on the value, </div><div class="line">        different object will be returned. If the graph is reversed </div><div class="line">        (1st DFS search), thenthe magic nodes list for the 2nd DFS search will </div><div class="line">        be returned. If the graph is not reversed (2nd DFS search on the </div><div class="line">        original graph), then the SCC dict with leader nodes will be returned. </div><div class="line">    - verbose (bool): Type some debug message if True.</div><div class="line">    </div><div class="line">    '''</div><div class="line">    visited = set()</div><div class="line">    leader_with_scc = &#123;&#125;</div><div class="line">    dfs_finish_order = []</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(graph, leader_with_scc, leader, i, visited, verbose)</span>:</span></div><div class="line">        <span class="keyword">if</span> verbose:</div><div class="line">            <span class="keyword">print</span> <span class="string">"On node: "</span>,i</div><div class="line">        visited.add(i)</div><div class="line">        leader_with_scc[leader].append(i)</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> graph[i]:</div><div class="line">            <span class="keyword">if</span> j <span class="keyword">in</span> visited:</div><div class="line">                <span class="keyword">if</span> verbose:</div><div class="line">                    <span class="keyword">print</span> <span class="string">"Already visited "</span>, j</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                dfs(graph, leader_with_scc, leader, j, visited, verbose)</div><div class="line">        <span class="keyword">if</span> verbose:</div><div class="line">            <span class="keyword">print</span> <span class="string">"complete "</span>, i</div><div class="line">        dfs_finish_order.append(i)</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> nodes_to_visit:</div><div class="line">        <span class="keyword">if</span> verbose:</div><div class="line">            <span class="keyword">print</span> <span class="string">"Start exploring "</span>, n </div><div class="line">        <span class="keyword">if</span> n <span class="keyword">in</span> visited:</div><div class="line">            <span class="keyword">if</span> verbose:</div><div class="line">                <span class="keyword">print</span> <span class="string">"Already explored "</span>,n</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            leader_with_scc[n] = []</div><div class="line">            dfs(graph, leader_with_scc, n, n, visited, verbose)</div><div class="line">    <span class="keyword">if</span> reverse:</div><div class="line">        <span class="keyword">return</span> dfs_finish_order</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> leader_with_scc</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">scc_size</span><span class="params">(scc_dict)</span>:</span></div><div class="line">    <span class="string">"""Print the first 5 largest scc size </span></div><div class="line">    Args:</div><div class="line">    - scc_dict (dict): key: leader node, value: scc nodes under the leader node.</div><div class="line">    """</div><div class="line">    </div><div class="line">    len_dict = &#123;&#125;</div><div class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> scc_dict.keys():</div><div class="line">        len_dict[k] = len( set(scc_dict[k]) )</div><div class="line">    scc_len_list = list(sorted(len_dict.values(), reverse=<span class="keyword">True</span>))</div><div class="line">    <span class="keyword">print</span> <span class="string">"The first 5 largest SCC length : "</span>, scc_len_list[:<span class="number">5</span>]</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    start_time = time.time()</div><div class="line">    file = <span class="string">"_410e934e6553ac56409b2cb7096a44aa_SCC.txt"</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"..........................................read in graph... "</span></div><div class="line">    origin_graph = readin_graph(file)</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">"...........................................Reverse graph... "</span></div><div class="line">    reversed_graph = reverse(origin_graph)</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">"...........................................1st DFS search ... "</span></div><div class="line">    magic_list = DFS(reversed_graph, nodes_to_visit=range(<span class="number">8</span>), </div><div class="line">                     reverse=<span class="keyword">True</span>, verbose=<span class="keyword">True</span>)</div><div class="line">    </div><div class="line">    magic_list.reverse()</div><div class="line">    <span class="keyword">print</span> <span class="string">"reversed magic list:"</span>, magic_list</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">".............................2nd DFS search and generage SCC.."</span></div><div class="line">    scc = DFS(origin_graph, nodes_to_visit=magic_list, </div><div class="line">              reverse=<span class="keyword">False</span>, verbose=<span class="keyword">True</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">"leader_with_scc:"</span>, scc</div><div class="line">    </div><div class="line">    scc_size(scc)</div></pre></td></tr></table></figure>
<p>看论坛上，有的人用递归形式的代码也跑成功了。python中，改递归上限可以使用如下代码，可能是我的机器不够强大吧。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">sys.setrecursionlimit(<span class="number">20000</span>)</div></pre></td></tr></table></figure></p>
<p>代码可以到<a href="https://github.com/jingxiao00/Aglo_study" target="_blank" rel="external">这里</a>下载.</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="http://pikipity.github.io/blog/cousera-algorithm-week4.html" target="_blank" rel="external">http://pikipity.github.io/blog/cousera-algorithm-week4.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week4/" data-id="cjlpbskcc0003xch53j6ra0vv" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algo/">Algo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/" class="article-date">
  <time datetime="2016-08-17T10:25:04.000Z" itemprop="datePublished">2016-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/">Algo Part 1 -- Programming Questions (week3)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这里主要记录下来在 “Algo: Part 1” 的Programming Questions 中的算法、实现和作业中的困难。我是用的是 Python。</p>
<h3 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h3><p>The file contains the adjacency list representation of a simple undirected graph. There are 200 vertices labeled 1 to 200. The first column in the file represents the vertex label, and the particular row (other entries except the first column) tells all the vertices that the vertex is adjacent to. So for example, the 6th row looks like : “6    155    56    52    120    ……”. This just means that the vertex with label 6 is adjacent to (i.e., shares an edge with) the vertices with labels 155,56,52,120,……,etc</p>
<p>Your task is to code up and run the randomized contraction algorithm for the min cut problem and use it on the above graph to compute the min cut. (HINT: Note that you’ll have to figure out an implementation of edge contractions. Initially, you might want to do this naively, creating a new graph from the old every time there’s an edge contraction. But you should also think about more efficient implementations.) (WARNING: As per the video lectures, please make sure to run the algorithm many times with different random seeds, and remember the smallest cut that you ever find.) Write your numeric answer in the space provided. So e.g., if your answer is 5, just type 5 in the space provided.</p>
<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>第三周，作业要求使用 “randomized contraction algorithm” 来解决 “min cut” 问题。当我们将图上所有的点划分为两大类的时候，如果一个边的两个端点分别属于两个大类，这一个边被我们称为 “cut”。”min cut” 问题就是找到一种分类方法，使得 “cut” 的数量最少。我们使用 “Karger’s Min Cut Algorithm” （也就是题目要求使用的方法）算法。</p>
<p>这个 “Karger’s Min Cut Algorithm” 非常简单，基本分为以下步骤：</p>
<p>随机选择一个边；<br>将选定的边的两个端点合并；<br>重复步骤1、2，直到只剩两个点，此两点之间的边就是 cut；<br>重复步骤1、2、3，直到找到 min cut。<br>以下图为例，如果要找到其 min cut，需要进行以下步骤：</p>
<img src="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/mincut1.png" alt="mincut1.png" title="">
<p>随机选择一个边，例如 b-f，将 b 和 f 合并，得到下图。注意：当两个点合并之后，只有这两个点之间的边消失，其他边依然存在，比如 a-bf 和 e-bf 都是两个边。</p>
<img src="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/mincut2.png" alt="mincut2.png" title="">
<p>再随机选择一个边，例如 g-h ，将 g 和 h 合并，得到下图。</p>
<img src="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/mincut3.png" alt="mincut3.png" title="">
<p>再随机选择一个边，例如 d-g，合并 d 和 g，由于 g 已经与 h 合并，所以得到下图。</p>
<img src="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/mincut4.png" alt="mincut4.png" title="">
<p>再随机选择一个边，例如 a-e，合并 a 和 e，得到下图。</p>
<img src="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/mincut5.png" alt="mincut5.png" title="">
<p>随机选择一个边，例如 a-b，合并 a 和 b，得到下图。</p>
<img src="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/mincut6.png" alt="mincut6.png" title="">
<p>随机选择一个边，例如 c-d，合并 c-d，得到下图。</p>
<img src="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/mincut7.png" alt="mincut7.png" title="">
<p>以上是一个循环，cut 数量为2。由于每次都是随机选择边，所以无法保证一次就得到最少的 cut 数量，所以要将以上的步骤循环多次，随着次数的增多，就可以找到 min cut 了。</p>
<h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="keyword">import</span> copy</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">replace</span><span class="params">(ls, X, Y)</span>:</span></div><div class="line">    <span class="string">"""replace all X into Y in the give list"""</span></div><div class="line">    <span class="keyword">for</span> i,v <span class="keyword">in</span> enumerate(ls):</div><div class="line">        <span class="keyword">if</span> v == X:</div><div class="line">            ls.pop(i)</div><div class="line">            ls.insert(i, Y)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">WeightedPick</span><span class="params">(weight, data)</span>:</span></div><div class="line">    <span class="string">"""Randomly Pick a edge in the graph </span></div><div class="line">    </div><div class="line">    To randomly pick a edge in the graph, we need to firstly pick a vertex </div><div class="line">    by its weight(number of edge that connnected), then randomly pick another</div><div class="line">    vertex that connected to it. </div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - weight (dict): with key a vertex, value is its weight</div><div class="line">    - data (dict): with key a vertex, value is the list of vertex it connected </div><div class="line">    """</div><div class="line">    r = random.uniform(<span class="number">0</span>, sum(weight.itervalues()))</div><div class="line">    s = <span class="number">0.0</span></div><div class="line">    <span class="keyword">for</span> k, w <span class="keyword">in</span> weight.iteritems():</div><div class="line">        s += w</div><div class="line">        <span class="keyword">if</span> r &lt; s: </div><div class="line">            <span class="keyword">return</span> k, random.choice(data[k])</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeall</span><span class="params">(ls, element)</span>:</span></div><div class="line">    <span class="string">"""return a ls with all pointed elements removed."""</span></div><div class="line">    <span class="keyword">return</span> [i <span class="keyword">for</span> i <span class="keyword">in</span> ls <span class="keyword">if</span> i != element]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">contraction</span><span class="params">(weight, data, k, v)</span>:</span></div><div class="line">    <span class="string">"""Inside the graph, contract v to k, replace all v to k.</span></div><div class="line">    The contraction of v to k in 4 steps:</div><div class="line">    1. remove all v in data[k]</div><div class="line">    2. remove all k in data[v]</div><div class="line">    3. extend data[k] with data[v]</div><div class="line">    4. in all the vertex that were connected to v, replace v to k </div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - weight (dict): with key a vertex, value is its weight</div><div class="line">    - data (dict): with key a vertex, value is the list of vertex it connected</div><div class="line">    - k (int): vertex of the edge that picked for contraction</div><div class="line">    - v (int): vortex of the edge that will be contracted by k</div><div class="line">    """</div><div class="line">    data[k] = removeall(data[k], v)</div><div class="line">    data[v] = removeall(data[v], k)</div><div class="line">    data[k].extend(data[v])</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> data[v]:</div><div class="line">        replace(data[i], v, k)</div><div class="line"></div><div class="line">    weight[k] = len(data[k])</div><div class="line">    data.pop(v)</div><div class="line">    weight.pop(v)</div><div class="line">    <span class="keyword">return</span> weight, data</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">mincut</span><span class="params">(data, weight)</span>:</span>    </div><div class="line">    <span class="string">'''return the mincut of the given graph</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - weight (dict): with key a vertex, value is its weight.</div><div class="line">    - data (dict): with key a vertex, value is the list of vertex it connected.</div><div class="line">    '''</div><div class="line">    <span class="keyword">while</span>(<span class="keyword">True</span>):</div><div class="line">        k, v = WeightedPick(weight, data)<span class="comment"># randomly pick a edge</span></div><div class="line">        weight, data = contraction(weight, data, k, v)<span class="comment"># contraction this edge</span></div><div class="line">        <span class="comment">#until left only two points</span></div><div class="line">        <span class="keyword">if</span> len(data) == <span class="number">2</span>:</div><div class="line">            <span class="keyword">break</span></div><div class="line">    <span class="keyword">return</span> weight[k]</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    file = <span class="string">"_f370cd8b4d3482c940e4a57f489a200b_kargerMinCut.txt"</span></div><div class="line">    data1 = &#123;&#125;</div><div class="line">    weight1 = &#123;&#125;</div><div class="line">    <span class="keyword">with</span> open(file) <span class="keyword">as</span> f:</div><div class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">            temp = line.split(<span class="string">'\t'</span>)[:<span class="number">-1</span>]</div><div class="line">            data1[int(temp[<span class="number">0</span>])] = [int(i) <span class="keyword">for</span> i <span class="keyword">in</span> temp[<span class="number">1</span>:]]</div><div class="line">            weight1[ int(temp[<span class="number">0</span>]) ]= len( data1[int( temp[<span class="number">0</span>] )] )</div><div class="line">    </div><div class="line">    start = time.time()</div><div class="line">    mincut_nr = <span class="number">1000</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">200</span>):</div><div class="line">        <span class="keyword">if</span> i%<span class="number">10</span> == <span class="number">0</span>:</div><div class="line">            <span class="keyword">print</span> <span class="string">"right now in loop:"</span>, i</div><div class="line">            <span class="keyword">print</span> <span class="string">"current mincut:"</span>, mincut_nr</div><div class="line">        d = copy.deepcopy(data1)</div><div class="line">        w = copy.deepcopy(weight1)</div><div class="line">        temp = mincut(d, w)</div><div class="line">        <span class="keyword">if</span> temp &lt; mincut_nr:</div><div class="line">            mincut_nr = temp</div><div class="line">            <span class="keyword">print</span> <span class="string">"smaller mincut found:"</span>, mincut_nr</div></pre></td></tr></table></figure>
<p>代码可以到<a href="https://github.com/jingxiao00/Aglo_study" target="_blank" rel="external">这里</a>下载.</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="http://pikipity.github.io/blog/cousera-algorithm-week3.html" target="_blank" rel="external">http://pikipity.github.io/blog/cousera-algorithm-week3.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/" data-id="cjlpbskc60001xch5lmp6ei1n" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algo/">Algo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithms-Design_and-Analysis-Part-1-week1-week2-summary" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/17/Algorithms-Design_and-Analysis-Part-1-week1-week2-summary/" class="article-date">
  <time datetime="2016-08-17T09:14:42.000Z" itemprop="datePublished">2016-08-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/17/Algorithms-Design_and-Analysis-Part-1-week1-week2-summary/">Algo Part 1 -- week1 &amp; week2 summary</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这里主要记录下来在 “Algo: Part 1” 的Programming Questions 中的算法、实现和作业中的困难。我是用的是 Python。 由于 Week 1 (mergesort) 和 Week 2 (quicksort) 都是讨论排序问题，所以在这里做下小结－比较一下之前实现过的方法的运行时间。</p>
<p>非常简单的比较了之前在 Week 1 和 Week 2 实现过的4排序方法和 Python 自带函数 sorted 对同一个数列运行100次的时间。结果如下：</p>
<p>Week 1 的 Merge Sort 方法：15.01s<br>Week 2 的 QuickSort（第一个元素做 Pivot）：3.07s<br>sorted 函数：0.34s</p>
<p>sorted函数使用 “Timsort” 方法，而且是使用 C 编写的，所以速度远远快于用 Python 编写的其他算法。所以想要速度快，还是用 C 比较好。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span><span class="params">(first_half, second_half)</span>:</span></div><div class="line">    <span class="string">""" MergeSort the given two arrays.</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    -first_half (list): The first array</div><div class="line">    -second_half (list): The second array </div><div class="line">    """</div><div class="line">    merged = []</div><div class="line">    i=<span class="number">0</span></div><div class="line">    j=<span class="number">0</span></div><div class="line">    len_first = len(first_half)</div><div class="line">    len_second = len(second_half)</div><div class="line">    len_total = len_first + len_second</div><div class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>, len_total):</div><div class="line">        <span class="keyword">if</span> first_half[i] &lt; second_half[j]:</div><div class="line">            merged.append(first_half[i])</div><div class="line">            i += <span class="number">1</span></div><div class="line">            <span class="keyword">if</span> i == len_first:</div><div class="line">                merged.extend(second_half[j:])</div><div class="line">                <span class="keyword">return</span> merged</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            merged.append(second_half[j])</div><div class="line">            j += <span class="number">1</span></div><div class="line">            <span class="keyword">if</span> j == len_second:</div><div class="line">                merged.extend(first_half[i:])</div><div class="line">                <span class="keyword">return</span> merged</div><div class="line">    <span class="keyword">return</span> merged</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">mergesort</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="string">"""Sort the give data(array) by mergesort.</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    -data (list): a list that need to be sorted.</div><div class="line">    """</div><div class="line">    n = len(data)</div><div class="line">    <span class="comment">#base case</span></div><div class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> data, <span class="number">0</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="comment">#split data</span></div><div class="line">        first_half = data[:n/<span class="number">2</span>]</div><div class="line">        second_half = data[n/<span class="number">2</span>:]</div><div class="line">        first_half = mergesort(first_half)</div><div class="line">        second_half = mergesort(second_half)</div><div class="line">        merged = merge(first_half, second_half)</div><div class="line">        <span class="keyword">return</span> merged</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort</span><span class="params">(Array, left, right)</span>:</span></div><div class="line">    <span class="string">"""This function do quicksort on array with the first element as pivot.</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - Array (list): The array that need to be sorted</div><div class="line">    - left (int): The index of the leftmost element of the array</div><div class="line">    - right (int): This index of the rightmost element of the array</div><div class="line">    """  </div><div class="line">    array_len = right - left + <span class="number">1</span></div><div class="line">    </div><div class="line">    <span class="comment">#Base case</span></div><div class="line">    <span class="keyword">if</span> left &gt; right: <span class="comment">#base case, when array has no element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">elif</span> array_len == <span class="number">1</span>: <span class="comment">#base case, when array has only one element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        pivot = Array[left]<span class="comment">#select the first element as the privot</span></div><div class="line">        i = left + <span class="number">1</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(left+<span class="number">1</span>, right+<span class="number">1</span>):</div><div class="line">            <span class="keyword">if</span> Array[j] &lt; pivot:</div><div class="line">                <span class="comment">#swap A[i] and A[j]</span></div><div class="line">                Array[i], Array[j] = Array[j], Array[i]</div><div class="line">                i += <span class="number">1</span></div><div class="line">        <span class="comment">#swap A[l] and A[i-1]</span></div><div class="line">        Array[left], Array[i<span class="number">-1</span>] = Array[i<span class="number">-1</span>], Array[left]</div><div class="line">        quicksort(Array, left, i<span class="number">-2</span>)</div><div class="line">        quicksort(Array, i, right)</div><div class="line">    <span class="keyword">return</span> Array</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    file = <span class="string">"_32387ba40b36359a38625cbb397eee65_QuickSort.txt"</span></div><div class="line">    data = []</div><div class="line">    <span class="keyword">with</span> open(file) <span class="keyword">as</span> f:</div><div class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">            data.append(int(line))</div><div class="line">    repeat = <span class="number">100</span></div><div class="line">    </div><div class="line">    <span class="comment">#Merge sort</span></div><div class="line">    starttime = time.time()</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(repeat):</div><div class="line">        array = data[:]</div><div class="line">        mergesort(array)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Execuation time for mergesort 100 times in second: "</span>, time.time() - starttime</div><div class="line">    </div><div class="line">    <span class="comment">#Quick sort</span></div><div class="line">    starttime = time.time()</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(repeat):</div><div class="line">        array = data[:]</div><div class="line">        quicksort(array, <span class="number">0</span>, len(array)<span class="number">-1</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Execuation time for quicksort 100 times in second: "</span>, time.time() - starttime</div><div class="line">    </div><div class="line">    <span class="comment">#Python sort</span></div><div class="line">    starttime = time.time()</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(repeat):</div><div class="line">        array = data[:]</div><div class="line">        sorted(array)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Execuation time for python sort (written in c) 100 times in second: "</span>, time.time() - starttime</div></pre></td></tr></table></figure>
<h4 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Execuation time <span class="keyword">for</span> mergesort <span class="number">100</span> times <span class="keyword">in</span> second:  <span class="number">15.010999918</span></div><div class="line">Execuation time <span class="keyword">for</span> quicksort <span class="number">100</span> times <span class="keyword">in</span> second:  <span class="number">3.07699990273</span></div><div class="line">Execuation time <span class="keyword">for</span> python sort (written <span class="keyword">in</span> c) <span class="number">100</span> times <span class="keyword">in</span> second:  <span class="number">0.338000059128</span></div></pre></td></tr></table></figure>
<p>代码可以到<a href="https://github.com/jingxiao00/Aglo_study" target="_blank" rel="external">这里</a>下载.</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="http://pikipity.github.io/blog/cousera-algorithm-week12summary.html" target="_blank" rel="external">http://pikipity.github.io/blog/cousera-algorithm-week12summary.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/17/Algorithms-Design_and-Analysis-Part-1-week1-week2-summary/" data-id="cjlpbskd0000ixch54sdc4q26" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algo/">Algo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/16/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week2/" class="article-date">
  <time datetime="2016-08-16T09:27:41.000Z" itemprop="datePublished">2016-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/16/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week2/">Algo Part 1 -- Programming Questions (week2)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这里主要记录下来在 “Algo Part 1” 的Programming Questions 中的算法、实现和作业中的困难。我用的是 Python。</p>
<h2 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h2><h3 id="Part-1"><a href="#Part-1" class="headerlink" title="Part 1"></a>Part 1</h3><p>The file contains all of the integers between 1 and 10,000 (inclusive, with no repeats) in unsorted order. The integer in the i<sup>th</sup> row of the file gives you the i<sup>th</sup> entry of an input array.</p>
<p>Your task is to compute the total number of comparisons used to sort the given input file by QuickSort. As you know, the number of comparisons depends on which elements are chosen as pivots, so we’ll ask you to explore three different pivoting rules.</p>
<p>You should not count comparisons one-by-one. Rather, when there is a recursive call on a subarray of length m, you should simply add m−1 to your running total of comparisons. (This is because the pivot element is compared to each of the other m−1 elements in the subarray in this recursive call.)</p>
<p>WARNING: The Partition subroutine can be implemented in several different ways, and different implementations can give you differing numbers of comparisons. For this problem, you should implement the Partition subroutine exactly as it is described in the video lectures (otherwise you might get the wrong answer).</p>
<p>DIRECTIONS FOR THIS PROBLEM:</p>
<p>For the first part of the programming assignment, you should always use the first element of the array as the pivot element.</p>
<p>HOW TO GIVE US YOUR ANSWER:</p>
<p>Type the numeric answer in the space provided.</p>
<p>So if your answer is 1198233847, then just type 1198233847 in the space provided without any space / commas / other punctuation marks. You have 5 attempts to get the correct answer.</p>
<h3 id="Part-2"><a href="#Part-2" class="headerlink" title="Part 2"></a>Part 2</h3><p>Compute the number of comparisons (as in Problem 1), always using the final element of the given array as the pivot element. Again, be sure to implement the Partition subroutine exactly as it is described in the video lectures.</p>
<p>Recall from the lectures that, just before the main Partition subroutine, you should exchange the pivot element (i.e., the last element) with the first element.</p>
<h3 id="Part-3"><a href="#Part-3" class="headerlink" title="Part 3"></a>Part 3</h3><p>Compute the number of comparisons (as in Problem 1), using the “median-of-three” pivot rule. [The primary motivation behind this rule is to do a little bit of extra work to get much better performance on input arrays that are nearly sorted or reverse sorted.] In more detail, you should choose the pivot as follows. Consider the first, middle, and final elements of the given array. (If the array has odd length it should be clear what the “middle” element is; for an array with even length 2k, use the kth element as the “middle” element. So for the array 4 5 6 7, the “middle” element is the second one —- 5 and not 6!) Identify which of these three elements is the median (i.e., the one whose value is in between the other two), and use this as your pivot. As discussed in the first and second parts of this programming assignment, be sure to implement Partition exactly as described in the video lectures (including exchanging the pivot element with the first element just before the main Partition subroutine).</p>
<p>EXAMPLE: For the input array 8 2 4 5 7 1 you would consider the first (8), middle (4), and last (1) elements; since 4 is the median of the set {1,4,8}, you would use 4 as your pivot element.</p>
<p>SUBTLE POINT: A careful analysis would keep track of the comparisons made in identifying the median of the three candidate elements. You should NOT do this. That is, as in the previous two problems, you should simply add m−1 to your running total of comparisons every time you recurse on a subarray with length m.</p>
<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>第二周，作业要求使用 “QuickSort” 方法对给定的数列排序，并记录“比较”的次数。这次作业的难点并不是对于 “QuickSort” 的实现，而是作业要求给出“比较”的次数。由于 “QuickSort” 虽然主思路一样但是实现方法千差万别，不同的实现方法会导致统计出来的“比较”的次数不同。所以必须严格按照老师上课讲的方法实现 “QuickSort” 才能得到正确答案。所以是否认真看老师的 lecture video 并能明白老师讲的细节成为这次作业的难点。由于 “QuickSort” 根据选定的 “Pivot” 不同可以分为三种，所以这一次的作业分为三个小问，每一个小问实现一种 “QuickSort”，通过“比较”次数的不同就会发现选择哪种 “Pivot” 比较好了。</p>
<p>“QuickSort” 的基本思想和 week 1 中使用的 “Merge Sort” 基本一样，也是将大问题分解为小问题，但是不再是从数组的中间进行数组的拆分，而是通过确定 “Pivot” 元素在排序之后的数组中的位置，并以此位置为基础进行拆分。所以在进行拆分的同时进行了排序，所以也就不需要合并（Merge）的步骤了。基本步骤如下：</p>
<ul>
<li><p>选择一个元素作为 “Pivot”。<br>将数组中的其他元素与 “Pivot” 比较大小从而将原数组拆分为两个数组：比 “Pivot” 小的数组与比 “Pivot” 大的数组。确定 “Pivot” 元素的位置从而完成对 “Pivot” 元素的排序。<br>分别对拆分出来的两个数组重复步骤1和步骤2，直到全部元素排序完成。<br>上述步骤中需要注意两点：</p>
</li>
<li><p>根据选定 “Pivot” 不同，排序步骤会发生不同，这也就是为什么这一次作业会出现三个小问。<br>对于拆分的过程不同，拆分出来的两个数组也会不同，这会导致后续步骤中 “Pivot” 的不同，从而导致排序步骤的不同，这也就是为什么要严格按照老师 lecture video 中讲的方法来进行拆分，否则答案会不对。</p>
</li>
</ul>
<p>接下来，对于三个小问（也就是三种 “Pivot” 选择方式衍生出来三种 “QuickSort”）分别如何实现来进行讲解。</p>
<h4 id="第一个元素作为-“Pivot”"><a href="#第一个元素作为-“Pivot”" class="headerlink" title="第一个元素作为 “Pivot”"></a>第一个元素作为 “Pivot”</h4><p>第一种 “QuickSort” 是将等待排序的数组的第一个元素作为 “Pivot” 来进行排序。在排序中，我们需要两个位置标记 i 和 j，整个等待排序的数列如下图所示，i 标记的是在比 “Pivot” 小的元素的数组中最后一个元素的位置，j 标记的是还没有和 “Pivot” 比较的元素的数组中第一个元素的位置。</p>
<img src="/2016/08/16/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week2/QuickSort1.png" alt="QuickSort1.png" title="">
<p>整个排序过程如下：</p>
<ul>
<li>选择等待排序的数组的第一个元素作为 “Pivot”，初始化 i 和 j，i指向第一个元素的位置，j 指向第二个元素的位置。</li>
<li>对 j 指向的元素和 “Pivot” 进行大小比较。如果 j 指向的元素小于 “Pivot”，那么就将 j 指向的元素与 i+1 指向的元素进行交换，然后 i 变为 i+1，否则不做任何操作。最后，j 变为 j+1。</li>
<li>重复步骤2，直到 j 指向的位置超出数组范围。得到的数组如下图所示。</li>
</ul>
<img src="/2016/08/16/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week2/QuickSort2.png" alt="QuickSort2.png" title="">
<ul>
<li>将 i 指向的元素与 “Pivot” 交换，结束 “Pivot” 元素的排序。得到的数组如下图所示。</li>
</ul>
<img src="/2016/08/16/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week2/QuickSort3.png" alt="QuickSort3.png" title="">
<ul>
<li>将比 “Pivot”小的元素组成的数组和比 “Pivot” 大的元素组成的数组分别作为等待排序的数组，重复步骤1～5，直到所有元素排序结束。</li>
</ul>
<h4 id="最后一个元素作为-“Pivot”"><a href="#最后一个元素作为-“Pivot”" class="headerlink" title="最后一个元素作为 “Pivot”"></a>最后一个元素作为 “Pivot”</h4><p>这种 “QuickSort”，只需要在排序前，将最后一个元素和第一个元素交换，就完全可以当作第一种一样进行操作。同样要注意，必须是“交换”，否则无法得到正确的“比较”次数。</p>
<h4 id="中间元素作为-“Pivot”"><a href="#中间元素作为-“Pivot”" class="headerlink" title="中间元素作为 “Pivot”"></a>中间元素作为 “Pivot”</h4><p>这里的“中间”元素并不是指地是数列中间的元素，而是将数列第一个元素、数列最后一个元素和数列中间的元素进行大小比较，排在中间的元素作为 “Pivot”。这一种同样可以等效为第一种，只是在排序前先要进行比较，然后把选定的元素和数列第一个元素进行交换就可以了。同样要注意，必须是“交换”。</p>
<p>Python 代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort1</span><span class="params">(Array, left, right, count)</span>:</span></div><div class="line">    <span class="string">"""This function do quicksort on array with the first element as pivot.</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - Array (list): The array that need to be sorted</div><div class="line">    - left (int): The index of the leftmost element of the array</div><div class="line">    - right (int): This index of the rightmost element of the array</div><div class="line">    """  </div><div class="line">    array_len = right - left + <span class="number">1</span></div><div class="line">    </div><div class="line">    <span class="comment">#Base case</span></div><div class="line">    <span class="keyword">if</span> left &gt; right: <span class="comment">#base case, when array has no element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">elif</span> array_len == <span class="number">1</span>: <span class="comment">#base case, when array has only one element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        count += (array_len - <span class="number">1</span>)</div><div class="line">        pivot = Array[left]<span class="comment">#select the first element as the privot</span></div><div class="line">        i = left + <span class="number">1</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(left+<span class="number">1</span>, right+<span class="number">1</span>):</div><div class="line">            <span class="keyword">if</span> Array[j] &lt; pivot:</div><div class="line">                <span class="comment">#swap A[i] and A[j]</span></div><div class="line">                Array[i], Array[j] = Array[j], Array[i]</div><div class="line">                i += <span class="number">1</span></div><div class="line">        <span class="comment">#swap A[l] and A[i-1]</span></div><div class="line">        Array[left], Array[i<span class="number">-1</span>] = Array[i<span class="number">-1</span>], Array[left]</div><div class="line">        </div><div class="line">        count = quicksort1(Array, left, i<span class="number">-2</span>, count)</div><div class="line">        count = quicksort1(Array, i, right, count)</div><div class="line">    <span class="keyword">return</span> count</div><div class="line"><span class="comment">##############################################################################</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort2</span><span class="params">(Array, left, right, count)</span>:</span></div><div class="line">    <span class="string">"""This function do quicksort on array with the last element as pivot.</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - Array (list): The array that need to be sorted</div><div class="line">    - left (int): The index of the leftmost element of the array</div><div class="line">    - right (int): This index of the rightmost element of the array</div><div class="line">    """  </div><div class="line">    array_len = right - left + <span class="number">1</span></div><div class="line">    </div><div class="line">    <span class="comment">#Base case</span></div><div class="line">    <span class="keyword">if</span> left &gt; right: <span class="comment">#base case, when array has no element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">elif</span> array_len == <span class="number">1</span>: <span class="comment">#base case, when array has only one element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        count += (array_len<span class="number">-1</span>)</div><div class="line">        pivot = Array[right]</div><div class="line">        <span class="comment">#exchange the pviot and the first element</span></div><div class="line">        Array[left], Array[right] = Array[right], Array[left]</div><div class="line">        i = left + <span class="number">1</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(left+<span class="number">1</span>, right+<span class="number">1</span>):</div><div class="line">            <span class="keyword">if</span> Array[j] &lt; pivot:</div><div class="line">                <span class="comment">#swap A[j] and A[j]</span></div><div class="line">                Array[i], Array[j] = Array[j], Array[i]</div><div class="line">                i += <span class="number">1</span></div><div class="line">        <span class="comment">#swap A[left] and A[i-1]</span></div><div class="line">        Array[left], Array[i<span class="number">-1</span>] = Array[i<span class="number">-1</span>], Array[left]</div><div class="line">        count = quicksort2(Array, left, i<span class="number">-2</span>, count)</div><div class="line">        count = quicksort2(Array, i, right, count)</div><div class="line">    <span class="keyword">return</span> count</div><div class="line"></div><div class="line"><span class="comment">#################################################################################</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">middle</span><span class="params">(x, y, z)</span>:</span></div><div class="line">    <span class="string">"""Return the middle of the three give element"""</span></div><div class="line">    <span class="keyword">return</span> sorted([x, y, z])[<span class="number">1</span>]</div><div class="line">    </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort3</span><span class="params">(Array, left, right, count)</span>:</span></div><div class="line">    <span class="string">"""This function do quicksort on array with the middle element as pivot.</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    - Array (list): The array that need to be sorted</div><div class="line">    - left (int): The index of the leftmost element of the array</div><div class="line">    - right (int): This index of the rightmost element of the array</div><div class="line">    """  </div><div class="line">    array_len = right - left + <span class="number">1</span></div><div class="line">    <span class="comment">#base case</span></div><div class="line">    <span class="keyword">if</span> left &gt; right: <span class="comment">#base case, when array has no element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">elif</span> array_len == <span class="number">1</span>: <span class="comment">#base case, when array has only one element</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="keyword">elif</span> array_len == <span class="number">2</span>:</div><div class="line">        count += <span class="number">1</span></div><div class="line">        <span class="keyword">if</span> Array[left] &gt; Array[right]:</div><div class="line">            Array[left], Array[right] =  Array[right], Array[left]</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">pass</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        count += (array_len<span class="number">-1</span>)</div><div class="line">        pivot = middle(Array[left], Array[right], Array[left+array_len/<span class="number">2</span><span class="number">-1</span>+array_len%<span class="number">2</span>])</div><div class="line">        this = Array.index(pivot)</div><div class="line">        Array[left], Array[this] = Array[this], Array[left]</div><div class="line">        i = left + <span class="number">1</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(left+<span class="number">1</span>, right+<span class="number">1</span>):</div><div class="line">            <span class="keyword">if</span> Array[j] &lt; pivot:</div><div class="line">                <span class="comment">#swap A[j] and A[j]</span></div><div class="line">                Array[i], Array[j] = Array[j], Array[i]</div><div class="line">                i += <span class="number">1</span></div><div class="line">        <span class="comment">#swap A[left] and A[i-1]</span></div><div class="line">        Array[left], Array[i<span class="number">-1</span>] = Array[i<span class="number">-1</span>], Array[left]</div><div class="line">        count = quicksort3(Array, left, i<span class="number">-2</span>, count)</div><div class="line">        count = quicksort3(Array, i, right, count)</div><div class="line">        </div><div class="line">    <span class="keyword">return</span> count</div><div class="line"></div><div class="line"><span class="comment">#################################################################################</span></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    file = <span class="string">"_32387ba40b36359a38625cbb397eee65_QuickSort.txt"</span></div><div class="line">    data = []</div><div class="line">    <span class="keyword">with</span> open(file) <span class="keyword">as</span> f:</div><div class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">            data.append(int(line))</div><div class="line"></div><div class="line">    array = data[:]</div><div class="line">    count = quicksort1(array, <span class="number">0</span>, len(array)<span class="number">-1</span>, count = <span class="number">0</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Number of comparion for quicksort1:"</span>, count</div><div class="line">    </div><div class="line">    array = data[:]</div><div class="line">    count = quicksort2(array, <span class="number">0</span>, len(array)<span class="number">-1</span>, count = <span class="number">0</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Number of comparion for quicksort2:"</span>, count </div><div class="line">     </div><div class="line">    array = data[:]</div><div class="line">    count = quicksort3(array, <span class="number">0</span>, len(array)<span class="number">-1</span>, count = <span class="number">0</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">"Number of comparion for quicksort3:"</span>, count</div></pre></td></tr></table></figure></p>
<p>代码可以到<a href="https://github.com/jingxiao00/Aglo_study" target="_blank" rel="external">这里</a>下载.</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="http://pikipity.github.io/blog/cousera-algorithm-week2.html" target="_blank" rel="external">http://pikipity.github.io/blog/cousera-algorithm-week2.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/16/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week2/" data-id="cjlpbskcq000bxch5d0rxqhbn" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algo/">Algo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Kaggle-start" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/15/Kaggle-start/" class="article-date">
  <time datetime="2016-08-15T17:34:23.000Z" itemprop="datePublished">2016-08-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/15/Kaggle-start/">Kaggle start</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="关于入门："><a href="#关于入门：" class="headerlink" title="关于入门："></a>关于入门：</h2><p>kaggle 的入门可以从101playground 开始，重要的是要开始做，万事开头难。<br>然后平时要多多看高手的文章，获奖经验。有的高手获奖者甚至会把自己的源代码放上去，你就是去仅仅跑一遍，也能学到非常多的东西。</p>
<h2 id="关于kaggle的问题分类："><a href="#关于kaggle的问题分类：" class="headerlink" title="关于kaggle的问题分类："></a>关于kaggle的问题分类：</h2><p>一般就是regression，classification, timeseries这几类。</p>
<h2 id="kaggle的问题一般解决过程："><a href="#kaggle的问题一般解决过程：" class="headerlink" title="kaggle的问题一般解决过程："></a>kaggle的问题一般解决过程：</h2><p>拿到数据之后，第一步就是data exploration. 这一步就是各种画图，找规律，找灵感，找可能的feature. 会R的可以shiny app做一些UI来辅助自己对数据的理解。<br>然是后选strategy, 从经典的机器学习算法中，选择自己要用的模型。一般这个大家都是用现成的包，没什么好说的。<br>如果数据量比较大的话，可能要做batch sampling,上work station.<br>通常先做一个超级简单的能跑的模型，之后就是无穷无尽的feature engineering了。。。</p>
<h2 id="一些tips："><a href="#一些tips：" class="headerlink" title="一些tips："></a>一些tips：</h2><p>classification 问题的大杀器是xgboost.<br>最终大杀器是ensemble learning.<br>feature 为王.<br>细节上，script 最好用svn或者git管理，做的时间长了容易乱。<br>另外，好像recruiting competitions 更简单一些，因为没有什么奖金。</p>
<h2 id="参加kaggle的好处："><a href="#参加kaggle的好处：" class="headerlink" title="参加kaggle的好处："></a>参加kaggle的好处：</h2><p>其实就不用说了，学到很多东西，而且通常数据量比较大，所以一个比赛做下来对自己的编程能力提升很高。另外如果成绩好的话，在简历上绝对是牛逼的一笔，是一些high level job的撬门砖。</p>
<h2 id="kaggle的局限性："><a href="#kaggle的局限性：" class="headerlink" title="kaggle的局限性："></a>kaggle的局限性：</h2><ol>
<li>kaggle把实际中的数据挖掘问题大大的简化了，给你的直接是非常好的dataset. 而实际中的问题，做机器学习是万里长征的最后一步，整个长征都是在做data cleanning…</li>
<li>kaggle和统计关系不大，需要用到的统计知识几乎为零。想要通过做kaggle来学统计是南辕北辙的，还是老老实实去读个学位吧。</li>
</ol>
<h2 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h2><p>kaggle的leader board很有意思，public leader board显示的仅仅是你提交答案一部分的数据分数。不到最后一刻，不知道谁才是真正的winner， 这个过程感觉蛮刺激的。。。</p>
<p>链接：<a href="https://www.zhihu.com/question/23987009/answer/117061767" target="_blank" rel="external">https://www.zhihu.com/question/23987009/answer/117061767</a><br>来源：知乎</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/15/Kaggle-start/" data-id="cjlpbskcu000dxch5xn6y1zos" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kaggle/">kaggle</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/" class="article-date">
  <time datetime="2016-08-14T15:16:56.000Z" itemprop="datePublished">2016-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/">Algo Part 1 -- Programming Questions (week1)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这里主要记录下来在 “Algo Part 1” 的Programming Questions 中的算法、实现和作业中的困难。我是用的是 Python。</p>
<h3 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h3><p>This file contains all of the 100,000 integers between 1 and 100,000 (inclusive) in some order, with no integer repeated.</p>
<p>Your task is to compute the number of inversions in the file given, where the i<sup>th</sup> row of the file indicates the ith entry of an array.</p>
<p>Because of the large size of this array, you should implement the fast divide-and-conquer algorithm covered in the video lectures.</p>
<p>The numeric answer for the given input file should be typed in the space below.</p>
<p>So if your answer is 1198233847, then just type 1198233847 in the space provided without any space / commas / any other punctuation marks. You can make up to 5 attempts, and we’ll use the best one for grading.</p>
<p>(We do not require you to submit your code, so feel free to use any programming language you want — just type the final numeric answer in the following space.)</p>
<h3 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h3><p>作业是要求使用 “Merge Sort” 方法对给定的数列排序，并记录下颠倒元素组（inversions）的个数。对于颠倒元素组，如果在一个数组中a[i]&gt;a[j]但是i&lt;j，就可以将其定义为一个颠倒元素组。例如，在[2, 4, 1, 3, 5]中，有三组(2,1)，(4,1)和(4,3)。</p>
<p>“Merge Sort” 方法比较简单。方法主要思想就是把一个大问题变为小问题，通过解决所有的小问题来实现大问题的解决。那么这个方法也就分为两步：</p>
<p>大问题分解为小问题（Devide）：这一步中，要将这个数组从中间进行拆分，一直拆分到数组足够小为止，对于排序问题，最小的数组应该是仅包含两个元素的数组。<br>解决所有的小问题实现大问题的解决（Merge）：这一步中，要将刚才拆分出来的所有小问题以回溯的方式逐层解决。<br>拿一个例子来讲解一下，加入我们要排序的数组是2, 4, 1, 3, 5，按照上面的步骤：</p>
<p>首先将大问题进行拆分，如图。</p>
<img src="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/merge_sorting1.png" alt="merge_sorting1.png" title="">
<p>然后从下向上依次解决小问题：<br>最下层有两个数组(2, 4)和(1)，很显然不存在颠倒元素组</p>
<img src="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/merge_sorting2.png" alt="merge_sorting2.png" title="">
<p>然后将最下层的两个数组(2, 4)和(1)进行合并，合并的同时进行排序。注意：在每次合并的时候，两个数组一定是已经各自排好序的，所以如果第一个数组的第 i 个元素大于第二个数组的第 k 个元素，那么第一个数组的第 i+1, i+2, i+3 … 个元素都大于第二个数组的第 k 个元素，也就是说，如果第一个数组的长度为 L，那么就有 (L-i+1) 个颠倒元素组。如图：</p>
<img src="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/merge_sorting3.png" alt="merge_sorting3.png" title="">
<p>类似的步骤对倒数第二层使用，就可以得到最终的结果了。</p>
<img src="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/merge_sorting4.png" alt="merge_sorting4.png" title="">
<p>在这个方法中需要特别注意的三点：</p>
<ul>
<li>在每次合并的时候，两个数组一定是已经各自排好序的，所以如果第一个数组的第 i 个元素大于第二个数组的第 k 个元素，那么第一个数组的第 i+1, i+2, i+3 … 个元素都大于第二个数组的第 k 个元素，也就是说，如果第一个数组的长度为 L，那么就有 (L-i+1) 个颠倒元素组，如图。需要注意的是，这里的 i 和 k 都是指的第 X 个元素，对于不同的编程语言，由于元素起始编号不同，那么对于第 X 个元素的引用方式也会不同，常规情况下（例如 C，C++，java 等），起始元素编号为0，所以第 i 个元素应该为 a[i-1] 而不是 a[i]，而对于 MATLAB，起始元素是1，所以第 i 个元素就是 a[i]。所以在计算颠倒元素个数的时候，要注意应该是 (L-i) 还是 (L-i+1)</li>
</ul>
<img src="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/merge_sorting5.png" alt="merge_sorting5.png" title="">
<ul>
<li>在合并的时候，可以每次都比较两个数组中的第一个元素，然后将小的那个从原数组中排出，放到存放结果的数组的最后，如图</li>
</ul>
<img src="/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/merge_sorting6.png" alt="merge_sorting6.png" title="">
<ul>
<li>最后在统计颠倒元素组个数的时候，记得要将所有的颠倒元素组加起来，包括拆分和合并两个部分。</li>
</ul>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">countsort</span><span class="params">(first_half, second_half)</span>:</span></div><div class="line">    <span class="string">""" MergeSort the given two arrays and return the number of inversions </span></div><div class="line">    before sorting.</div><div class="line">    </div><div class="line">    Args:</div><div class="line">    -first_half (list): The first array</div><div class="line">    -second_half (list): The second array </div><div class="line">    """</div><div class="line">    nrb_invers = <span class="number">0</span></div><div class="line">    merged = []</div><div class="line">    i=<span class="number">0</span></div><div class="line">    j=<span class="number">0</span></div><div class="line">    len_first = len(first_half)</div><div class="line">    len_second = len(second_half)</div><div class="line">    len_total = len_first + len_second</div><div class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> range(<span class="number">0</span>, len_total):</div><div class="line">        <span class="keyword">if</span> first_half[i] &lt; second_half[j]:</div><div class="line">            merged.append(first_half[i])</div><div class="line">            i += <span class="number">1</span></div><div class="line">            <span class="keyword">if</span> i == len_first:</div><div class="line">                merged.extend(second_half[j:])</div><div class="line">                <span class="keyword">return</span> merged, nrb_invers</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            merged.append(second_half[j])</div><div class="line">            j += <span class="number">1</span></div><div class="line">            nrb_invers += (len(first_half) - i)</div><div class="line">            <span class="keyword">if</span> j == len_second:</div><div class="line">                merged.extend(first_half[i:])</div><div class="line">                <span class="keyword">return</span> merged, nrb_invers</div><div class="line">    <span class="keyword">return</span> merged, nrb_invers</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_inverse</span><span class="params">(data)</span>:</span></div><div class="line">    <span class="string">"""Sort the give data(array) and count the number of inversions in the array</span></div><div class="line">    </div><div class="line">    Args:</div><div class="line">    -data (list): a list that need to be sorted and count the inversions. </div><div class="line">    """</div><div class="line">    n = len(data)</div><div class="line">    <span class="comment">#base case</span></div><div class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> data, <span class="number">0</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="comment">#split data</span></div><div class="line">        first_half = data[:n/<span class="number">2</span>]</div><div class="line">        second_half = data[n/<span class="number">2</span>:]</div><div class="line">        first_half, nrb_inverse_1st = count_inverse(first_half)</div><div class="line">        second_half, nrb_inverse_2nd = count_inverse(second_half)</div><div class="line">        merged, nrb_inverse_merged = countsort(first_half, second_half)</div><div class="line">        <span class="keyword">return</span> merged, nrb_inverse_1st + nrb_inverse_2nd + nrb_inverse_merged</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    file = <span class="string">"_bcb5c6658381416d19b01bfc1d3993b5_IntegerArray.txt"</span></div><div class="line">    data = []</div><div class="line">    <span class="keyword">with</span> open(file) <span class="keyword">as</span> f:</div><div class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</div><div class="line">            data.append(int(line))</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">'Number of inversions is:'</span>,count_inverse(data)[<span class="number">1</span>]</div></pre></td></tr></table></figure>
<p>代码可以到<a href="https://github.com/jingxiao00/Aglo_study" target="_blank" rel="external">这里</a>下载.</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>[1] <a href="http://pikipity.github.io/blog/cousera-algorithm-week1.html" target="_blank" rel="external">http://pikipity.github.io/blog/cousera-algorithm-week1.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/14/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week1/" data-id="cjlpbskc10000xch55kt9l48w" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algo/">Algo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/14/hello-world/" class="article-date">
  <time datetime="2016-08-14T14:25:25.718Z" itemprop="datePublished">2016-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/14/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/08/14/hello-world/" data-id="cjlpbskcy000gxch5gz2570cy" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algo/">Algo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algo/">algo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algo-alogrithm-Dijkstra-heap-heapq-priority-queue-python-shortest-path/">algo, alogrithm, Dijkstra, heap, heapq, priority queue, python, shortest path</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kaggle/">kaggle</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algo/" style="font-size: 20px;">Algo</a> <a href="/tags/algo/" style="font-size: 10px;">algo</a> <a href="/tags/algo-alogrithm-Dijkstra-heap-heapq-priority-queue-python-shortest-path/" style="font-size: 10px;">algo, alogrithm, Dijkstra, heap, heapq, priority queue, python, shortest path</a> <a href="/tags/kaggle/" style="font-size: 10px;">kaggle</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/08/20/Algorithms-Design-and-Analysis-Part-2-Programming-Questions-week1/">Algo Part 2 -- Programming Questions (week1)</a>
          </li>
        
          <li>
            <a href="/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week6/">Algo Part 1 -- Programming Questions (week6)</a>
          </li>
        
          <li>
            <a href="/2016/08/20/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week5/">Algo Part 1 -- Programming Questions (week5)</a>
          </li>
        
          <li>
            <a href="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week4/">Algo Part 1 -- Programming Questions (week4)</a>
          </li>
        
          <li>
            <a href="/2016/08/17/Algorithms-Design-and-Analysis-Part-1-Programming-Questions-week3/">Algo Part 1 -- Programming Questions (week3)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Doreen Xinnuo Wang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>